var QueryLoader={overlay:"",loadBar:"",preloader:"",items:new Array,doneStatus:0,doneNow:0,selectorPreload:"body",ieLoadFixTime:2e3,ieTimeout:"",init:function(){return"MSIE 6.0,6.0"==navigator.userAgent.match(/MSIE (\d+(?:\.\d+)+(?:b\d*)?)/)?!1:("body"==QueryLoader.selectorPreload?(QueryLoader.spawnLoader(),QueryLoader.getImages(QueryLoader.selectorPreload),QueryLoader.createPreloading()):$(document).ready(function(){QueryLoader.spawnLoader(),QueryLoader.getImages(QueryLoader.selectorPreload),QueryLoader.createPreloading()}),void(QueryLoader.ieTimeout=setTimeout("QueryLoader.ieLoadFix()",QueryLoader.ieLoadFixTime)))},ieLoadFix:function(){var e=navigator.userAgent.match(/MSIE (\d+(?:\.\d+)+(?:b\d*)?)/);if(e[0].match("MSIE"))for(;100/QueryLoader.doneStatus*QueryLoader.doneNow<100;)QueryLoader.imgCallback()},imgCallback:function(){QueryLoader.doneNow++,QueryLoader.animateLoader()},getImages:function(e){var r=$(e).find("*:not(script)").each(function(){var e="";if("none"!=$(this).css("background-image"))var e=$(this).css("background-image");else if("undefined"!=typeof $(this).attr("src")&&"img"==$(this).attr("tagName").toLowerCase())var e=$(this).attr("src");e=e.replace('url("',""),e=e.replace("url(",""),e=e.replace('")',""),e=e.replace(")",""),e.length>0&&QueryLoader.items.push(e)})},createPreloading:function(){QueryLoader.preloader=$("<div></div>").appendTo(QueryLoader.selectorPreload),$(QueryLoader.preloader).css({height:"0px",width:"0px",overflow:"hidden"});var e=QueryLoader.items.length;QueryLoader.doneStatus=e;for(var r=0;e>r;r++){var a=$("<img></img>");$(a).attr("src",QueryLoader.items[r]),$(a).unbind("load"),$(a).bind("load",function(){QueryLoader.imgCallback()}),$(a).appendTo($(QueryLoader.preloader))}},spawnLoader:function(){if("body"==QueryLoader.selectorPreload)var e=$(window).height(),r=$(window).width(),a="fixed";else var e=$(QueryLoader.selectorPreload).outerHeight(),r=$(QueryLoader.selectorPreload).outerWidth(),a="absolute";var o=$(QueryLoader.selectorPreload).offset().left,d=$(QueryLoader.selectorPreload).offset().top;QueryLoader.overlay=$("<div></div>").appendTo($(QueryLoader.selectorPreload)),$(QueryLoader.overlay).addClass("qOverlay"),$(QueryLoader.overlay).css({position:a,top:d,left:o,width:r+"px",height:e+"px"}),QueryLoader.loadBar=$("<div></div>").appendTo($(QueryLoader.overlay)),$(QueryLoader.loadBar).addClass("qLoader"),$(QueryLoader.loadBar).css({position:"relative",top:"50%",width:"0%"})},animateLoader:function(){var e=100/QueryLoader.doneStatus*QueryLoader.doneNow;e>99?$(QueryLoader.loadBar).stop().animate({width:e+"%"},500,"linear",function(){QueryLoader.doneLoad()}):$(QueryLoader.loadBar).stop().animate({width:e+"%"},500,"linear",function(){})},doneLoad:function(){if(clearTimeout(QueryLoader.ieTimeout),"body"==QueryLoader.selectorPreload)var e=$(window).height();else var e=$(QueryLoader.selectorPreload).outerHeight();$(QueryLoader.loadBar).animate({height:e+"px",top:0},500,"linear",function(){$(QueryLoader.overlay).fadeOut(800),$(QueryLoader.preloader).remove()})}};